var Swipster;Swipster=function(){"use strict";function t(t,i){this.element=t,this.$element=$(this.element),this.slides=[],this.numberOfSlides=0,this._maxSlide=0,this._thread=null,this._index={},this.options=$.extend({},s,i),this.options.basicMode=!this._supports("transition"),this.classes={main:"swipster",inner:"swipster__inner",slide:{main:"swipster__slide",current:"swipster__slide--current",next:"swipster__slide--next",prev:"swipster__slide--prev",hidden:"swipster__slide--hidden"},controls:{main:"swipster__controls",next:"swipster__control--next",prev:"swipster__control--prev"},indicators:"swipster__indicators",counter:{main:"swipster__counter",current:"swipster__digit--current",total:"swipster__digit--total"}},this.init()}var s={startPosition:0,indicators:!0,controls:!0,counter:!0,basicMode:!1,interval:5e3};return t.prototype={init:function(){this.$element.children("."+this.classes.slide.main).each($.proxy(function(t,s){this.slides[t]=s},this)),this.numberOfSlides=this.slides.length,this._maxSlide=this.numberOfSlides-1,this._setIndex(this.options.startPosition),this.touch={startX:0,startY:0,currentX:0,currentY:0,lastX:0,lastY:0,direction:"",distanceX:0,distanceY:0,initiated:!1,directionLocked:!1},this.createDOM(),this.bindEvents()},destroy:function(){this.unbindEvents(),this.destroyDOM()},start:function(){this._thread=setInterval($.proxy(function(){this.slideToNext()},this),this.options.interval)},stop:function(){clearInterval(this._thread)},createDOM:function(){var t=this._slideTemplate();this.options.indicators&&(t+=this._indicatorsTemplate()),this.options.controls&&(t+=this._controlsTemplate()),this.options.counter&&(t+=this._counterTemplate()),this.$element.children("."+this.classes.slide.main).remove().end().addClass(this.classes.main).append(t),this.$inner=this.$element.children("."+this.classes.inner),this.$indicators=this.$element.children("."+this.classes.indicators),this.$controls=this.$element.children("."+this.classes.controls.main),this.$counter=this.$element.children("."+this.classes.counter.main)},destroyDOM:function(){this.$element.prepend(this.slides),this.$inner.remove(),this.$indicators.remove(),this.$controls.remove(),this.$counter.remove()},_slideTemplate:function(){var t,s,i='<div class="'+this.classes.inner+'">';for(t=0;t<this.numberOfSlides;t++)s=this.classes.slide.hidden,t==this._index.current&&(s=this.classes.slide.current),this._index.next!=this._index.prev&&(t==this._index.next?s=this.classes.slide.next:t==this._index.prev&&(s=this.classes.slide.prev)),i+='<div class="'+s+'">'+this.slides[t].innerHTML+"</div>";return i+"</div>"},_indicatorsTemplate:function(){var t,s,i='<ol class="'+this.classes.indicators+'">';for(t=0;t<this.numberOfSlides;t++)s=t==this._index.current?"active":"",i+='<li class="'+s+'" data-slide-to="'+t+'"></li>';return i+"</ol>"},_controlsTemplate:function(){return'<div class="'+this.classes.controls.main+'"><a href="#next" class="'+this.classes.controls.prev+'"></a><a href="#prev" class="'+this.classes.controls.next+'"></a></div>'},_counterTemplate:function(){return'<div class="'+this.classes.counter.main+'"><span class="'+this.classes.counter.current+'">'+(this._index.current+1)+'</span><span class="divider">/</span><span class="'+this.classes.counter.total+'">'+this.numberOfSlides+"</span></div>"},bindEvents:function(){this.$element.on("click",$.proxy(this._handleClick,this)),this.$element.on("touchstart touchmove touchcancel touchend",$.proxy(this._handleTouch,this))},unbindEvents:function(){this.$element.off("click",this._handleClick),this.$element.off("touchstart touchmove touchcancel touchend",this._handleTouch)},_handleClick:function(t){switch(t.type){case"click":var s=$(t.target);s.parent().hasClass(this.classes.indicators)&&(s.hasClass("active")||this.slideTo(s.data("slide-to")),t.preventDefault()),s.hasClass(this.classes.controls.next)&&(this.slideToNext(),t.preventDefault()),s.hasClass(this.classes.controls.prev)&&(this.slideToPrev(),t.preventDefault())}},_handleTouch:function(t){var s=t.originalEvent.touches[0];switch(t.type){case"touchstart":if(this.touch.initiated)return;this.touch={startX:s.pageX,startY:s.pageY,currentX:0,currentY:0,lastX:0,lastY:0,direction:"",distanceX:0,distanceY:0,initiated:!0,directionLocked:!1};break;case"touchmove":if(!this.touch.initiated)return;if(this.touch.currentX=s.pageX-this.touch.startX,this.touch.currentY=s.pageY-this.touch.startY,this.touch.currentX!=this.touch.lastX&&(this.touch.distanceX=this.touch.distanceX+1),this.touch.currentY!=this.touch.lastY&&(this.touch.distanceY=this.touch.distanceY+1),this.touch.lastY=this.touch.currentY,this.touch.lastX=this.touch.currentX,this.touch.distanceX<10&&this.touch.distanceY<10)return;if(!this.directionLocked&&this.touch.distanceY>this.touch.distanceX)return this.initiated=!1,void 0;t.preventDefault(),this.directionLocked=!0;break;case"touchend":if(!this.touch.initiated)return;Math.abs(this.touch.currentX)>25&&(this.touch.currentX<0?this.slideToNext():this.slideToPrev()),this.touch.initiated=!1}},slideTo:function(t){return this.$inner.hasClass("animating")?!1:(this.options.basicMode?this._slideToSimple(t):this._slideToAnimation(t),void 0)},slideToNext:function(){this.slideTo(this._index.current+1)},slideToPrev:function(){this.slideTo(this._index.current-1)},_slideToSimple:function(t){this._setIndex(t),this._renderAll()},_slideToAnimation:function(t){var s,i,e,n,r;r=[this.classes.slide.hidden,this.classes.slide.prev,this.classes.slide.next].join(" "),this._index.current<t?(i="animate-to-next",s=this.classes.slide.next):(i="animate-to-prev",s=this.classes.slide.prev),this._setIndex(t),e=this.$inner.children().eq(this._index.current),n=this.$inner.children("."+s),e.hasClass(s)||(n.removeClass(s).addClass(this.classes.slide.hidden),e.removeClass(r).addClass(s)),this.$inner.addClass("animating "+i).transitionEnd($.proxy(this._animationEnd,this))},_animationEnd:function(){this.$inner.removeClass("animating animate-to-next animate-to-prev"),this._renderAll()},_renderSlides:function(){this.$inner.children().each($.proxy(function(t,s){var i=this.classes.slide.hidden;t==this._index.current&&(i=this.classes.slide.current),this._index.next!=this._index.prev&&(t==this._index.next?i=this.classes.slide.next:t==this._index.prev&&(i=this.classes.slide.prev)),$(s).removeClass([this.classes.slide.hidden,this.classes.slide.current,this.classes.slide.prev,this.classes.slide.next].join(" ")).addClass(i)},this))},_renderIndicators:function(){return this.options.indicators?(this.$indicators.children(".active").removeClass("active").end().children("[data-slide-to="+this._index.current+"]").addClass("active"),void 0):!1},_renderCounter:function(){return this.options.counter?(this.$counter.children("."+this.classes.counter.current).text(this._index.current+1),void 0):!1},_renderAll:function(){this._renderSlides(),this._renderIndicators(),this._renderCounter()},_incrementIndex:function(){this._setIndex(this._index.current+1)},_decrementIndex:function(){this._setIndex(this._index.current-1)},_setIndex:function(t){var s,i,e=t;e>this._maxSlide?e=0:0>e&&(e=this._maxSlide),s=e-1,0>s&&(s=this._maxSlide),i=e+1,i>this._maxSlide&&(i=0),this._index={prev:s,current:e,next:i}},_supports:function(t,s){var i,e,n=document.body||document.documentElement,r=n.style;if("undefined"==typeof r)return!1;if("string"==typeof r[t])return s?t:!0;for(i=["Moz","Webkit","Khtml","O","ms","Icab"],t=t.charAt(0).toUpperCase()+t.substr(1),e=0;e<i.length;e++)if("string"==typeof r[i[e]+t])return s?i[e]+t:!0}},t}();